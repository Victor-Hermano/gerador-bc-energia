<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador UTM - Grupo BC Energia</title>
    
    <!-- Ícone da Aba -->
    <link rel="icon" href="https://site.grupobcenergia.com.br/wp-content/uploads/2023/08/cropped-favicon-32x32.png" sizes="32x32" />
    
    <!-- React & ReactDOM (Via CDN) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (Para JSX) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fontes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- ÍCONES SVG (Incorporados para evitar erros de biblioteca externa) ---
        const Icons = {
            Zap: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>,
            Users: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>,
            UserCircle: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="12" cy="12" r="10"/><circle cx="12" cy="10" r="3"/><path d="M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662"/></svg>,
            Leaf: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z"/><path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"/></svg>,
            Settings: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.72v-.51a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>,
            Trash2: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>,
            Search: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>,
            Database: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><ellipse cx="12" cy="5" rx="9" ry="3"/><path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/><path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/></svg>,
            ShieldAlert: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/><path d="M12 8v4"/><path d="M12 16h.01"/></svg>,
            ShieldCheck: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/><path d="m9 12 2 2 4-4"/></svg>,
            Download: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>,
            Copy: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>,
            Check: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="M20 6 9 17l-5-5"/></svg>,
            ChevronDown: (props) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}><path d="m6 9 6 6 6-6"/></svg>,
        };

        // --- APLICAÇÃO PRINCIPAL ---
        const App = () => {
            const [mode, setMode] = useState('single');
            
            // BANCO DE DADOS
            const initialPartnerDb = [
                // --- PARCERIAS (BCPAR/MYBROKER) ---
                { code: 'BCPAR001', name: 'TERRITORIAL AGROPECUARIA (melchior)', category: 'parcerias' },
                { code: 'BCPAR002', name: 'WA ENERGIA SOLAR (ricardowa)', category: 'parcerias' },
                { code: 'BCPAR003', name: 'AURAVERDE ENERGIA', category: 'parcerias' },
                { code: 'BCPAR004', name: 'IMPETUS ENERGY', category: 'parcerias' },
                { code: 'BCPAR005', name: 'GASPARETO CONSTRUTORA', category: 'parcerias' },
                { code: 'BCPAR007', name: 'IEE ASSESSORIA', category: 'parcerias' },
                { code: 'BCPAR008', name: 'NEW LINE FRANCHISING', category: 'parcerias' },
                { code: 'BCPAR009', name: 'ABL', category: 'parcerias' },
                { code: 'BCPAR010', name: 'ACIEG', category: 'parcerias' },
                { code: 'BCPAR011', name: 'MENEGHELLO CONSULTORIA', category: 'parcerias' },
                { code: 'BCPAR012', name: 'CUNHA IMPORTACAO', category: 'parcerias' },
                { code: 'BCPAR013', name: 'DIEGO BRAYNNER', category: 'parcerias' },
                { code: 'BCPAR014', name: 'OLIVEIRA & OLIVEIRA', category: 'parcerias' },
                { code: 'BCPAR015', name: 'MIRANDA SOLUÇÕES (beckmann)', category: 'parcerias' },
                { code: 'BCPAR016', name: 'REAL ENGENHARIA', category: 'parcerias' },
                { code: 'BCPAR017', name: 'DIONATAS ALVES (cdmsolar)', category: 'parcerias' },
                { code: 'BCPAR018', name: 'ELECTY SERVICES', category: 'parcerias' },
                { code: 'BCPAR027', name: 'KADOSH SOLAR', category: 'parcerias' },
                { code: 'BCPAR028', name: 'SCUSCIATTO REPRESENTACOES', category: 'parcerias' },
                { code: 'BCPAR035', name: 'NOVEPAR SOLUÇÕES', category: 'parcerias' },
                { code: 'BCPAR053', name: 'VANTAGE ENERGIA', category: 'parcerias' },
                { code: 'BCPAR062', name: 'EVOLUCAO E TECNOLOGIA (evolight)', category: 'parcerias' },
                { code: 'BCPAR065', name: 'LUX ENERGY', category: 'parcerias' },
                { code: 'BCPAR068', name: 'STELLA GD', category: 'parcerias' },
                { code: 'BCPAR069', name: 'GOIÂNIA CRED', category: 'parcerias' },
                { code: 'BCPAR073', name: 'IGREEN COMERCIAL', category: 'parcerias' },
                { code: 'BCPAR077', name: 'MF COMERCIO (netcomm)', category: 'parcerias' },
                { code: 'BCPAR098', name: 'TEODORO PEREIRA', category: 'parcerias' },
                { code: 'BCPAR105', name: 'HOXTER AUTOMASOL', category: 'parcerias' },
                { code: 'BCPAR127', name: 'EOS ENGENHARIA', category: 'parcerias' },
                { code: 'BCPAR132', name: 'ONDA SOLAR', category: 'parcerias' },
                { code: 'BCPAR136', name: 'SOLAR VOLTZ', category: 'parcerias' },
                { code: 'BCPAR141', name: 'BANPRIME', category: 'parcerias' },
                { code: 'BCPAR142', name: 'SAGA RH', category: 'parcerias' },
                { code: 'BCPAR145', name: 'SAGA BYD MARISTA', category: 'parcerias' },
                { code: 'BCPAR160', name: 'CIO CERRADO', category: 'parcerias' },
                { code: 'BCPAR161', name: 'MASTERCELL SOLUCOES', category: 'parcerias' },
                { code: 'BCPAR162', name: 'SINDIÓPTICA', category: 'parcerias' },
                { code: 'BCPAR165', name: 'CARDAPIO DE NEGOCIOS', category: 'parcerias' },
                { code: 'BCPAR185', name: 'SAGA BYD CUIABA', category: 'parcerias' },
                { code: 'BCPAR201', name: 'LUXON ENERGIA (unisol)', category: 'parcerias' },
                { code: 'BCPAR204', name: 'ZELENA ENERGIA', category: 'parcerias' },
                { code: 'BCPAR221', name: 'GC INFINITY', category: 'parcerias' },
                { code: 'BCPAR228', name: 'UNA EFICIÊNCIA', category: 'parcerias' },
                { code: 'BCPAR229', name: 'HUMA TECNOLOGIA', category: 'parcerias' },
                { code: 'BCPAR236', name: 'ELOBLUE', category: 'parcerias' },
                { code: 'BCPAR240', name: 'REAL PROMOTORA', category: 'parcerias' },
                { code: 'BCPAR244', name: 'PORTO ROYAL', category: 'parcerias' },
                { code: 'BCPAR248', name: 'TETRASEC', category: 'parcerias' },
                { code: 'BCPAR262', name: 'ECO SOLUÇÕES', category: 'parcerias' },
                { code: 'BCPAR263', name: 'GRUPO ENERGIA', category: 'parcerias' },
                { code: 'BCPAR291', name: 'INTEGRADORA SENTINELA', category: 'parcerias' },
                { code: 'BCPAR306', name: 'JREB BRASIL', category: 'parcerias' },
                { code: 'BCPAR307', name: 'MEDFACIL FRANQUIAS', category: 'parcerias' },
                { code: 'BCPAR309', name: 'SEVEN ENERGIA', category: 'parcerias' },
                { code: 'BCPAR316', name: 'ATLAS VOLT', category: 'parcerias' },
                { code: 'BCPAR317', name: 'ECOSINERGIA', category: 'parcerias' },
                { code: 'BCPAR318', name: 'GRUPO REI', category: 'parcerias' },
                { code: 'BCPAR321', name: 'CLARA ENERGIA', category: 'parcerias' },
                { code: 'BCPAR325', name: 'MULTICAMPOS SOLAR', category: 'parcerias' },
                { code: 'BCPAR378', name: 'GEMEOS REPRESENTAÇÕES', category: 'parcerias' },
                { code: 'BCPAR380', name: 'MOVE MAIS', category: 'parcerias' },
                { code: 'BCPAR381', name: 'OPTY (ultra.telecom)', category: 'parcerias' },
                { code: 'BCPAR413', name: 'G4 EDUCAÇÃO', category: 'parcerias' },
                { code: 'BCPAR422', name: 'W M SOLUÇÕES', category: 'parcerias' },
                { code: 'BCPAR426', name: 'REPOSIT TECNOLOGIA', category: 'parcerias' },
                { code: 'BCPAR434', name: 'ARIS ENERGIA', category: 'parcerias' },
                { code: 'BCPAR446', name: 'CJR PROMOCAO (FINDER)', category: 'parcerias' },
                { code: 'BCPAR449', name: 'EMERSON JAMES', category: 'parcerias' },
                { code: 'BCPAR451', name: 'LILIA SALES', category: 'parcerias' },
                { code: 'BCPAR452', name: 'FELIPE RAMOS', category: 'parcerias' },
                { code: 'BCPAR454', name: 'MYLENA BARROSO (MS.ENGENHARIA)', category: 'parcerias' },
                { code: 'BCPAR455', name: 'EXPRESSO VIAGENS', category: 'parcerias' },
                { code: 'BCPAR461', name: 'VELTRIS SOLUCOES', category: 'parcerias' },
                { code: 'BCPAR464', name: 'MOB92 TECNOLOGIA', category: 'parcerias' },
                { code: 'MYBROKER006', name: 'Nilson Moura', category: 'parcerias' },
                { code: 'MYBROKER020', name: 'Welismar Balbino', category: 'parcerias' },
                { code: 'MYBROKER030', name: 'Rafael Botim', category: 'parcerias' },
                { code: 'MYBROKER042', name: 'Alan Farias', category: 'parcerias' },
                { code: 'MYBROKER050', name: 'Saulo Moura', category: 'parcerias' },
                { code: 'MYBROKER082', name: 'G.A SOLUÇÕES', category: 'parcerias' },
                { code: 'MYBROKER095', name: 'Virginia Costa', category: 'parcerias' },
                { code: 'MYBROKER255', name: 'Maria Rodrigues', category: 'parcerias' },

                // --- OUTBOUND (CMGD) ---
                { code: '001TT00000maceDYAQ', name: 'CMGD - ALESSANDRO MARTINS', category: 'outbound' },
                { code: '001TT00000nytGjYAI', name: 'CMGD - BRUNO BARCELOS FRANÇA', category: 'outbound' },
                { code: '001TT00000tv47IYAQ', name: 'CMGD - CARLLA CRISTINA DA SILVA', category: 'outbound' },
                { code: '001TT00000mTSi1YAG', name: 'CMGD - DANILO COUTO', category: 'outbound' },
                { code: '001TT0000140Kn8YAE', name: 'CMGD - DIVINO SOLOMAR MOREIRA DA SILVA', category: 'outbound' },
                { code: '001TT00000nxv2rYAA', name: 'CMGD - FELLIPE AUGUSTO TAVARES MARTINS', category: 'outbound' },
                { code: '001TT00000pfawcYAA', name: 'CMGD - GABRIEL GIÃO BARAUNA', category: 'outbound' },
                { code: '001TT00000mabbiYAA', name: 'CMGD - GILMAR RODRIGUES', category: 'outbound' },
                { code: '001TT00000maakUYAQ', name: 'CMGD - ISABELA MAGALHAES', category: 'outbound' },
                { code: '001TT000013aIXFYA2', name: 'CMGD - ITO SILVERIO GAMA RIBEIRO GUEDES', category: 'outbound' },
                { code: '001TT00000mLOoWYAW', name: 'CMGD - JESSYCA OLIVEIRA', category: 'outbound' },
                { code: '001TT00000maKe8YAE', name: 'CMGD - JONATHAN MARTINS', category: 'outbound' },
                { code: '001TT00000pfUklYAE', name: 'CMGD - MARSON MARLON DOS SANTOS PINGARILHO', category: 'outbound' },
                { code: '001TT00000tv47IYAQ', name: 'CMGD - PAULO HENRIQUE DA SILVA MENDES DUTRA', category: 'outbound' },
                { code: '001TT00000nytGjYAI', name: 'CMGD - PEDRO HENRIQUE FIGUEIREDO COSTA', category: 'outbound' },
                { code: '001TT00000maakUYAQ', name: 'CMGD - ROGÉRIO MARCELINO', category: 'outbound' },
                { code: '001TT00000tv47IYAQ', name: 'CMGD - VICTOR TORRES OLIVEIRA', category: 'outbound' },
                { code: '001TT00000maceDYAQ', name: 'CMGD - WAGNER CARVALHO DE OLIVEIRA', category: 'outbound' },
                { code: '001TT00000maKe8YAE', name: 'CMGD - WENDINA SILVA', category: 'outbound' },

                // --- INBOUND ---
                { code: '0013t00002edXPRAA2', name: 'ALESSANDRO BRITO CUNHA', category: 'inbound' },
                { code: '001TT00000DjZmxYAF', name: 'ALEXANDRE GONÇALVES BORBA', category: 'inbound' },
                { code: '001TT0000108SGNYA2', name: 'AUGUSTO SERGIO DE LIMA NUNES DOS SANTOS', category: 'inbound' },
                { code: '001TT0000108UV4YAM', name: 'MARIA EDUARDA BARBOSA', category: 'inbound' },
                { code: '001TT00000skzhSYAQ', name: 'TARIANA DA SILVA ALMEIDA', category: 'inbound' },
                { code: '001TT00000vdI2nYAE', name: 'THAYS POLLYANA TEIXEIRA', category: 'inbound' },
                { code: '001TT000016nwV7YAI', name: 'VICTOR HERMANO ASSUNÇÃO SANTOS', category: 'inbound' },
                { code: '001TT00000krokAYAQ', name: 'VICTOR HUGO TAVEIRA DE MORAES PINA', category: 'inbound' },
            ];

            const presets = {
                fonts: ['parcerias', 'outbound', 'inbound', 'finder', 'parceiro_pdv', 'eventos_feiras'],
                products: ['gd', 'acl', 'bess'],
                segments: ['b2b', 'b2c', 'b2b b2c'],
                regions: ['nacional', 'go', 'df', 'mt', 'ms', 'mg', 'sp', 'rj', 'ba', 'ac', 'al', 'ap', 'am', 'ce', 'es', 'ma', 'pa', 'pb', 'pr', 'pe', 'pi', 'rn', 'ro', 'rr', 'sc', 'se', 'to'],
                channels: ['email-mkt', 'whatsapp', 'instagram', 'facebook', 'linkedin', 'qr_code_folder', 'qr_code_evento', 'qr_code_balcao', 'youtube', 'podcast', 'banner']
            };

            const [baseUrl, setBaseUrl] = useState('https://site.grupobcenergia.com.br');
            const [crmCampaignId, setCrmCampaignId] = useState(''); 

            const [params, setParams] = useState({
                utm_source: 'cpv',
                utm_medium: 'cpv',
                utm_campaign: '',
                utm_font: 'parcerias', 
                utm_content: '',       
                utm_term: '',          
                utm_channel: '',      
                utm_product: '',       
                utm_segment: '',       
                utm_region: ''         
            });

            const [pasteListText, setPasteListText] = useState('');
            const [selectedPartners, setSelectedPartners] = useState([]); 
            const [searchTerm, setSearchTerm] = useState('');

            const [generatedUrl, setGeneratedUrl] = useState('');
            const [bulkResults, setBulkResults] = useState([]);
            const [copied, setCopied] = useState(false);
            const [validationErrors, setValidationErrors] = useState([]);

            const applyPreset = (type) => {
                if (type === 'parcerias') {
                    setParams(prev => ({ ...prev, utm_font: 'parcerias', utm_source: 'cpv', utm_medium: 'cpv' }));
                    setSelectedPartners([]);
                    setMode('partners_db'); 
                } else if (type === 'inbound') {
                    setParams(prev => ({ ...prev, utm_font: 'inbound', utm_source: 'google', utm_medium: 'cpc' }));
                    setSelectedPartners([]);
                    setMode('partners_db'); 
                } else if (type === 'outbound') {
                    setParams(prev => ({ ...prev, utm_font: 'outbound', utm_source: 'cpv', utm_medium: 'cpv' }));
                    setSelectedPartners([]);
                    setMode('partners_db'); 
                }
            };

            const handleParamChange = (key, value) => {
                setParams(prev => ({ ...prev, [key]: value }));
            };

            const filteredPartners = useMemo(() => {
                let teamFiltered = [];
                if (params.utm_font === 'parcerias') {
                    teamFiltered = initialPartnerDb.filter(p => p.category === 'parcerias');
                } else if (params.utm_font === 'inbound') {
                    teamFiltered = initialPartnerDb.filter(p => p.category === 'inbound');
                } else if (params.utm_font === 'outbound') {
                    teamFiltered = initialPartnerDb.filter(p => p.category === 'outbound');
                }

                return teamFiltered.filter(p => 
                    p.name.toLowerCase().includes(searchTerm.toLowerCase()) || 
                    p.code.toLowerCase().includes(searchTerm.toLowerCase())
                );
            }, [searchTerm, params.utm_font]);

            const togglePartner = (code) => {
                setSelectedPartners(prev => 
                    prev.includes(code) ? prev.filter(c => c !== code) : [...prev, code]
                );
            };

            const toggleAllPartners = () => {
                if (selectedPartners.length === filteredPartners.length) {
                    setSelectedPartners([]);
                } else {
                    setSelectedPartners(filteredPartners.map(p => p.code));
                }
            };

            const validate = () => {
                const errors = [];
                if (!baseUrl) errors.push("URL da Landing Page");
                if (!crmCampaignId) errors.push("ID da Campanha Salesforce");
                if (!params.utm_campaign) errors.push("Nome da Campanha");
                if (!params.utm_product) errors.push("Produto");
                if (!params.utm_segment) errors.push("Segmento");
                if (!params.utm_region) errors.push("Região");
                
                if (mode === 'single') {
                    if (!params.utm_term) errors.push("Nome (Vendedor/Parceiro)");
                    if (!params.utm_content) errors.push("ID da Conta Salesforce");
                } else if (mode === 'partners_db') {
                    if (selectedPartners.length === 0) errors.push("Pelo menos 1 colaborador selecionado");
                } else if (mode === 'paste_list') {
                    if (!pasteListText.trim()) errors.push("Lista de códigos colada");
                }

                return errors;
            };

            const buildUrl = (base, crmId, currentParams, accountId) => {
                if (!base) return '';
                try {
                    let formatted = base.trim();
                    if (!formatted.match(/^https?:\/\//)) {
                        formatted = 'https://' + formatted;
                    }
                    
                    const urlObj = new URL(formatted);
                    const cleanBase = urlObj.origin + urlObj.pathname;
                    const url = new URL(cleanBase);
                    const searchParams = new URLSearchParams(url.search);

                    if (crmId) searchParams.set('campanha', crmId);     
                    if (accountId) searchParams.set('conta', accountId); 

                    const utmKeys = ['utm_source', 'utm_medium', 'utm_font', 'utm_campaign', 'utm_term', 'utm_content', 'utm_channel', 'utm_product', 'utm_segment', 'utm_region'];
                    
                    const finalParams = { 
                        ...currentParams, 
                        utm_content: accountId 
                    };

                    utmKeys.forEach(key => {
                        if (finalParams[key]) searchParams.set(key, finalParams[key]);
                    });

                    return `${url.origin}${url.pathname}?${searchParams.toString()}${url.hash}`;
                } catch (e) {
                    return 'URL Inválida';
                }
            };

            useEffect(() => {
                const errors = validate();
                setValidationErrors(errors);

                if (errors.length > 0) {
                    setGeneratedUrl('');
                    setBulkResults([]);
                    return;
                }

                if (mode === 'single') {
                    const long = buildUrl(baseUrl, crmCampaignId, params, params.utm_content);
                    setGeneratedUrl(long);
                } 
                else if (mode === 'partners_db') {
                    const results = selectedPartners.map(code => {
                        const partner = initialPartnerDb.find(p => p.code === code) || { name: 'Desconhecido', code };
                        const rowParams = { ...params, utm_term: partner.name };
                        return {
                            name: partner.name,
                            code: partner.code,
                            url: buildUrl(baseUrl, crmCampaignId, rowParams, partner.code)
                        };
                    });
                    setBulkResults(results);
                }
                else if (mode === 'paste_list') {
                    const lines = pasteListText.split('\n').filter(l => l.trim() !== '');
                    const results = lines.map(line => {
                        const parts = line.split(/[\t,;]+/).map(p => p.trim());
                        let name = parts[0] || '';
                        let code = parts[1] || '';
                        if (!code && name.match(/^(BCPAR|001)/i)) { code = name; name = 'Sem Nome'; }
                        const rowParams = { ...params, utm_term: name };
                        return {
                            name,
                            code,
                            url: buildUrl(baseUrl, crmCampaignId, rowParams, code)
                        };
                    });
                    setBulkResults(results);
                }
            }, [baseUrl, crmCampaignId, params, mode, selectedPartners, pasteListText]);

            const copyToClipboard = (text) => {
                if (!text || validationErrors.length > 0) return;
                const textArea = document.createElement("textarea");
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                setCopied(true);
                setTimeout(() => setCopied(false), 2000);
            };

            const downloadCSV = () => {
                if (validationErrors.length > 0 || bulkResults.length === 0) return;
                
                let csvContent = "\uFEFF"; 
                csvContent += "Nome do Parceiro;Código do Parceiro;Link Gerado\n";
                
                bulkResults.forEach(row => {
                    const safeName = row.name.replace(/;/g, ' ').replace(/[\r\n]+/g, ' ');
                    csvContent += `${safeName};${row.code};${row.url}\n`;
                });
                
                const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement("a");
                link.setAttribute("href", url);
                link.setAttribute("download", `urls_${params.utm_campaign || 'campanha'}_${mode}.csv`);
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
            };

            const clearAll = () => {
                setBaseUrl('https://site.grupobcenergia.com.br'); 
                setCrmCampaignId('');
                setSelectedPartners([]);
                setPasteListText('');
                setParams(prev => ({
                    ...prev,
                    utm_campaign: '',
                    utm_content: '',
                    utm_term: '',
                    utm_channel: '',
                    utm_product: '',
                    utm_segment: '',
                    utm_region: ''
                }));
            };

            const getListName = () => {
                switch(params.utm_font) {
                    case 'parcerias': return 'Parceiros Externos (BCPAR/MYBROKER)';
                    case 'inbound': return 'Time Inbound';
                    case 'outbound': return 'Time Outbound (CMGD)';
                    default: return 'Colaboradores';
                }
            };

            return (
                <div className="min-h-screen bg-slate-100 text-slate-800 font-sans p-4 md:p-6 font-inter">
                    <div className="max-w-[1400px] mx-auto">
                        
                        <div className="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 mb-6 flex flex-col md:flex-row justify-between items-center gap-6 relative overflow-hidden">
                            <div className="absolute top-0 right-0 w-64 h-64 bg-gradient-to-bl from-emerald-100/50 to-transparent -mr-16 -mt-16 rounded-full pointer-events-none"></div>
                            
                            <div className="flex items-center gap-4 relative z-10">
                                <div className="bg-gradient-to-br from-emerald-500 to-cyan-500 p-3 rounded-xl text-white shadow-lg shadow-emerald-500/20">
                                    <Icons.Zap size={28} className="text-white fill-current" />
                                </div>
                                <div>
                                    <h1 className="text-2xl font-bold text-slate-900 tracking-tight">Gerador BC Energia</h1>
                                    <div className="flex items-center gap-2 mt-1">
                                        <span className="text-emerald-700 bg-emerald-50 px-2 py-0.5 rounded text-xs font-bold border border-emerald-100 tracking-wide">V17.0 Clean UI</span>
                                        <p className="text-slate-500 text-xs">Tracking Intelligence</p>
                                    </div>
                                </div>
                            </div>

                            <div className="flex gap-2 relative z-10 bg-slate-50 p-1.5 rounded-xl border border-slate-200">
                                <button 
                                    onClick={() => applyPreset('parcerias')} 
                                    className={`px-5 py-2.5 rounded-lg text-xs font-bold transition-all duration-300 flex items-center gap-2 ${
                                        params.utm_font === 'parcerias' 
                                        ? 'bg-cyan-500 text-white shadow-md shadow-cyan-500/25 ring-2 ring-cyan-500/20 ring-offset-1' 
                                        : 'text-slate-500 hover:bg-slate-200 hover:text-slate-700 bg-transparent'
                                    }`}
                                >
                                    <Icons.Users size={14} /> Time Parcerias
                                </button>
                                <button 
                                    onClick={() => applyPreset('inbound')} 
                                    className={`px-5 py-2.5 rounded-lg text-xs font-bold transition-all duration-300 flex items-center gap-2 ${
                                        params.utm_font === 'inbound' 
                                        ? 'bg-teal-600 text-white shadow-md shadow-teal-600/25 ring-2 ring-teal-600/20 ring-offset-1' 
                                        : 'text-slate-500 hover:bg-slate-200 hover:text-slate-700 bg-transparent'
                                    }`}
                                >
                                    <Icons.UserCircle size={14} /> Time Inbound
                                </button>
                                <button 
                                    onClick={() => applyPreset('outbound')} 
                                    className={`px-5 py-2.5 rounded-lg text-xs font-bold transition-all duration-300 flex items-center gap-2 ${
                                        params.utm_font === 'outbound' 
                                        ? 'bg-emerald-600 text-white shadow-md shadow-emerald-600/25 ring-2 ring-emerald-600/20 ring-offset-1' 
                                        : 'text-slate-500 hover:bg-slate-200 hover:text-slate-700 bg-transparent'
                                    }`}
                                >
                                    <Icons.Leaf size={14} /> Time Outbound
                                </button>
                            </div>
                        </div>

                        <div className="grid grid-cols-1 lg:grid-cols-12 gap-6">
                        
                        {/* CONFIGURAÇÃO (ESQUERDA) */}
                        <div className="lg:col-span-3 space-y-4">
                            <div className="bg-white p-5 rounded-2xl shadow-sm border border-slate-200 relative overflow-hidden group">
                            <div className="absolute top-0 left-0 w-1.5 h-full bg-slate-800 group-hover:bg-emerald-500 transition-colors duration-500"></div>
                            <div className="flex justify-between items-center mb-5">
                                <h2 className="font-bold text-sm text-slate-800 uppercase tracking-wide flex items-center gap-2">
                                    <Icons.Settings size={16} className="text-slate-400" /> Configuração Global
                                </h2>
                                <button onClick={clearAll} className="text-[10px] text-red-500 hover:text-red-600 hover:bg-red-50 px-2 py-1 rounded transition-colors flex items-center gap-1">
                                    <Icons.Trash2 size={12} /> Limpar
                                </button>
                            </div>

                            <div className="space-y-4">
                                    <div>
                                        <label className="block text-[10px] font-bold text-slate-500 uppercase mb-1.5">URL da Landing Page <span className="text-red-500">*</span></label>
                                        <input type="url" value={baseUrl} onChange={(e) => setBaseUrl(e.target.value)} placeholder="https://..." className="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg text-xs outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100 transition-all text-slate-700" />
                                    </div>
                                    <div>
                                        <label className="block text-[10px] font-bold text-slate-500 uppercase mb-1.5">ID da Campanha Salesforce <span className="text-red-500">*</span></label>
                                        <input type="text" value={crmCampaignId} onChange={(e) => setCrmCampaignId(e.target.value)} placeholder="Ex: a11TT00000..." className="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg text-xs font-mono outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100 transition-all text-slate-700" />
                                    </div>
                                    
                                    <div className="border-t border-slate-100 pt-4 mt-2">
                                        <label className="block text-[10px] font-bold text-slate-500 uppercase mb-1.5">Nome Campanha (utm_campaign) <span className="text-red-500">*</span></label>
                                        <input type="text" value={params.utm_campaign} onChange={(e) => handleParamChange('utm_campaign', e.target.value)} placeholder="ex: comercial_gd" className="w-full p-3 bg-slate-50 border border-slate-200 rounded-lg text-xs font-medium outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100 transition-all text-slate-700" />
                                    </div>

                                    <div className="grid grid-cols-2 gap-3">
                                        <div>
                                            <label className="block text-[10px] font-bold text-slate-500 uppercase mb-1.5">Produto <span className="text-red-500">*</span></label>
                                            <select value={params.utm_product} onChange={(e) => handleParamChange('utm_product', e.target.value)} className="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg text-xs outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100 transition-all text-slate-700 cursor-pointer">
                                                <option value="">Selecione...</option>
                                                {presets.products.map(p => <option key={p} value={p}>{p.toUpperCase()}</option>)}
                                            </select>
                                        </div>
                                        <div>
                                            <label className="block text-[10px] font-bold text-slate-500 uppercase mb-1.5">Segmento <span className="text-red-500">*</span></label>
                                            <select value={params.utm_segment} onChange={(e) => handleParamChange('utm_segment', e.target.value)} className="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg text-xs outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100 transition-all text-slate-700 cursor-pointer">
                                                <option value="">Selecione...</option>
                                                {presets.segments.map(s => <option key={s} value={s}>{s.toUpperCase()}</option>)}
                                            </select>
                                        </div>
                                    </div>

                                    <div className="grid grid-cols-2 gap-3">
                                        <div>
                                            <label className="block text-[10px] font-bold text-slate-500 uppercase mb-1.5">Região <span className="text-red-500">*</span></label>
                                            <select value={params.utm_region} onChange={(e) => handleParamChange('utm_region', e.target.value)} className="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg text-xs outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100 transition-all text-slate-700 cursor-pointer">
                                                <option value="">Selecione...</option>
                                                {presets.regions.map(r => <option key={r} value={r}>{r.toUpperCase()}</option>)}
                                            </select>
                                        </div>
                                        <div>
                                            <label className="block text-[10px] font-bold text-slate-500 uppercase mb-1.5">Canal (utm_channel)</label>
                                            <input list="channels" value={params.utm_channel} onChange={(e) => handleParamChange('utm_channel', e.target.value)} className="w-full p-2.5 bg-slate-50 border border-slate-200 rounded-lg text-xs outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100 transition-all text-slate-700" />
                                            <datalist id="channels">{presets.channels.map(c => <option key={c} value={c} />)}</datalist>
                                        </div>
                                    </div>

                                    <div className="bg-emerald-50/50 p-3 rounded-lg border border-emerald-100/50 text-[10px] text-emerald-800 space-y-1">
                                        <p>Font: <b className="uppercase">{params.utm_font}</b></p>
                                    </div>
                            </div>
                            </div>
                        </div>

                        {/* SELEÇÃO (CENTRAL) */}
                        <div className="lg:col-span-5 flex flex-col h-full">
                            <div className="bg-white rounded-2xl shadow-sm border border-slate-200 flex-1 flex flex-col overflow-hidden">
                                
                                <div className="flex border-b border-slate-100 bg-slate-50/50 p-1">
                                    <button onClick={() => setMode('single')} className={`flex-1 py-2.5 text-xs font-bold rounded-lg transition-all ${mode === 'single' ? 'bg-white text-emerald-600 shadow-sm' : 'text-slate-400 hover:text-slate-600 hover:bg-slate-100 bg-transparent'}`}>
                                        Individual
                                    </button>
                                    <button onClick={() => setMode('partners_db')} className={`flex-1 py-2.5 text-xs font-bold rounded-lg transition-all ${mode === 'partners_db' ? 'bg-white text-emerald-600 shadow-sm' : 'text-slate-400 hover:text-slate-600 hover:bg-slate-100 bg-transparent'}`}>
                                        Lista Base
                                    </button>
                                    <button onClick={() => setMode('paste_list')} className={`flex-1 py-2.5 text-xs font-bold rounded-lg transition-all ${mode === 'paste_list' ? 'bg-white text-emerald-600 shadow-sm' : 'text-slate-400 hover:text-slate-600 hover:bg-slate-100 bg-transparent'}`}>
                                        Colar Manual
                                    </button>
                                </div>

                                <div className="p-6 flex-1 overflow-y-auto">
                                    
                                    {mode === 'single' && (
                                        <div className="space-y-6">
                                            <div className="bg-gradient-to-b from-blue-50 to-white p-6 rounded-2xl border border-blue-100/50">
                                                <div className="flex items-center gap-3 mb-4">
                                                    <div className="bg-blue-100 p-2 rounded-lg text-blue-600"><Icons.UserCircle size={20}/></div>
                                                    <div>
                                                        <h3 className="text-sm font-bold text-slate-800">Geração Única</h3>
                                                        <p className="text-xs text-slate-500">Crie um link específico.</p>
                                                    </div>
                                                </div>
                                                
                                                <div className="space-y-4">
                                                    <div>
                                                        <label className="block text-xs font-bold text-slate-700 mb-1.5">ID da Conta Salesforce <span className="text-red-500">*</span></label>
                                                        <input type="text" value={params.utm_content} onChange={(e) => handleParamChange('utm_content', e.target.value)} placeholder="Ex: 001TT00000mLOoW..." className="w-full p-3.5 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-100 focus:border-blue-400 outline-none text-sm font-mono transition-all text-slate-700" />
                                                    </div>
                                                    <div>
                                                        <label className="block text-xs font-bold text-slate-700 mb-1.5">Nome do Vendedor/Parceiro <span className="text-red-500">*</span></label>
                                                        <input type="text" value={params.utm_term} onChange={(e) => handleParamChange('utm_term', e.target.value)} placeholder="Ex: João Silva" className="w-full p-3.5 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-100 focus:border-blue-400 outline-none text-sm transition-all text-slate-700" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    )}

                                    {mode === 'partners_db' && (
                                        <div className="h-full flex flex-col">
                                            
                                            <div className="mb-4 flex items-center gap-2 text-xs bg-emerald-50 p-3 rounded-xl text-emerald-800 border border-emerald-100">
                                                <Icons.Database size={14} className="text-emerald-600"/>
                                                Exibindo: <span className="font-bold uppercase tracking-wide">{getListName()}</span>
                                            </div>

                                            <div className="flex gap-2 mb-3">
                                                <div className="relative flex-1">
                                                    <Icons.Search size={16} className="absolute left-3.5 top-3.5 text-slate-400" />
                                                    <input 
                                                        type="text" 
                                                        placeholder={`Buscar ${params.utm_font === 'parcerias' ? 'parceiro' : 'vendedor'}...`} 
                                                        value={searchTerm}
                                                        onChange={(e) => setSearchTerm(e.target.value)}
                                                        className="w-full pl-10 p-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:border-emerald-500 focus:bg-white transition-all text-slate-700" 
                                                    />
                                                </div>
                                                <button onClick={toggleAllPartners} className="px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-xl text-xs font-bold whitespace-nowrap transition-colors">
                                                    {selectedPartners.length === filteredPartners.length && filteredPartners.length > 0 ? 'Desmarcar Todos' : 'Marcar Todos'}
                                                </button>
                                            </div>

                                            <div className="flex-1 overflow-y-auto border border-slate-200 rounded-xl">
                                                <table className="w-full text-left border-collapse">
                                                    <thead className="bg-slate-50 sticky top-0 z-10">
                                                        <tr>
                                                            <th className="p-3 text-[10px] font-bold text-slate-500 uppercase w-10 border-b border-slate-200">
                                                                <input type="checkbox" checked={selectedPartners.length === filteredPartners.length && filteredPartners.length > 0} onChange={toggleAllPartners} className="rounded border-slate-300 text-emerald-500 focus:ring-emerald-500"/>
                                                            </th>
                                                            <th className="p-3 text-[10px] font-bold text-slate-500 uppercase border-b border-slate-200">Código</th>
                                                            <th className="p-3 text-[10px] font-bold text-slate-500 uppercase border-b border-slate-200">Nome</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody className="divide-y divide-slate-50">
                                                        {filteredPartners.length > 0 ? filteredPartners.map((p, idx) => (
                                                            <tr key={`${p.code}-${p.name}-${idx}`} className={`hover:bg-emerald-50/60 cursor-pointer transition-colors ${selectedPartners.includes(p.code) ? 'bg-emerald-50/80' : 'bg-white'}`} onClick={() => togglePartner(p.code)}>
                                                                <td className="p-3 text-center">
                                                                    <input type="checkbox" checked={selectedPartners.includes(p.code)} readOnly className="rounded border-slate-300 text-emerald-600 focus:ring-emerald-500"/>
                                                                </td>
                                                                <td className="p-3 text-xs font-mono text-slate-500">{p.code}</td>
                                                                <td className="p-3 text-xs font-medium text-slate-800">{p.name}</td>
                                                            </tr>
                                                        )) : (
                                                            <tr>
                                                                <td colSpan="3" className="p-8 text-center text-xs text-slate-400">
                                                                    Nenhum registro encontrado para o time <b>{params.utm_font}</b>.
                                                                </td>
                                                            </tr>
                                                        )}
                                                    </tbody>
                                                </table>
                                            </div>
                                            <p className="text-[10px] text-slate-400 mt-2 text-right font-medium">
                                                {selectedPartners.length} selecionados
                                            </p>
                                        </div>
                                    )}

                                    {mode === 'paste_list' && (
                                        <div className="h-full flex flex-col">
                                            <label className="block text-xs font-bold text-slate-700 mb-2">Cole sua lista (Excel/CSV)</label>
                                            <textarea value={pasteListText} onChange={(e) => setPasteListText(e.target.value)} placeholder={`Nome, ID_Conta\nJoão, 001TT...\nMaria, 001TT...`} className="flex-1 w-full p-4 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-100 focus:border-emerald-400 outline-none font-mono text-xs resize-none text-slate-700" />
                                        </div>
                                    )}

                                </div>
                            </div>
                        </div>

                        <div className="lg:col-span-4 h-full">
                            <div className="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 h-full flex flex-col">
                                
                                {validationErrors.length > 0 ? (
                                    <div className="bg-red-50 border border-red-100 p-4 rounded-xl mb-4 animate-in fade-in slide-in-from-top-2">
                                        <div className="flex items-center gap-2 mb-2">
                                            <Icons.ShieldAlert size={18} className="text-red-500" />
                                            <h4 className="text-xs font-bold text-red-800 uppercase tracking-wide">Preenchimento Pendente</h4>
                                        </div>
                                        <ul className="space-y-1">
                                            {validationErrors.map((err, i) => (
                                                <li key={i} className="text-[11px] text-red-600 flex items-center gap-1.5">
                                                    <span className="w-1 h-1 rounded-full bg-red-400"></span> {err}
                                                </li>
                                            ))}
                                        </ul>
                                    </div>
                                ) : (
                                    <div className="bg-emerald-50 border border-emerald-100 p-4 rounded-xl mb-4 flex flex-col gap-3 animate-in fade-in slide-in-from-top-2">
                                        <div className="flex items-center justify-between">
                                            <div className="flex items-center gap-2">
                                                <div className="bg-emerald-100 p-1.5 rounded-full">
                                                    <Icons.ShieldCheck size={16} className="text-emerald-600" />
                                                </div>
                                                <span className="text-xs font-bold text-emerald-800 uppercase tracking-wide">
                                                    {mode === 'single' ? 'URL Pronta' : `${bulkResults.length} URLs Geradas`}
                                                </span>
                                            </div>
                                            {mode !== 'single' && (
                                                <button onClick={downloadCSV} className="flex items-center gap-1.5 bg-white border border-emerald-200 text-emerald-700 px-3 py-1.5 rounded-lg text-xs font-bold shadow-sm hover:bg-emerald-50 transition-colors">
                                                    <Icons.Download size={14} /> BAIXAR
                                                </button>
                                            )}
                                        </div>
                                    </div>
                                )}

                                <div className="flex-1 overflow-hidden flex flex-col">
                                    {mode === 'single' ? (
                                        <div className="relative h-full">
                                            <textarea 
                                                readOnly 
                                                value={generatedUrl} 
                                                className={`w-full h-full p-5 bg-slate-900 text-emerald-400 rounded-2xl font-mono text-xs resize-none border-none outline-none leading-relaxed ${validationErrors.length > 0 ? 'opacity-50' : ''}`}
                                            />
                                            {validationErrors.length === 0 && (
                                                <button 
                                                    onClick={() => copyToClipboard(generatedUrl)} 
                                                    className="absolute bottom-5 right-5 bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white px-5 py-2.5 rounded-xl text-xs font-bold shadow-lg shadow-emerald-500/30 transition-all transform hover:scale-105 flex items-center gap-2"
                                                >
                                                    {copied ? <Icons.Check size={16} /> : <Icons.Copy size={16} />}
                                                    {copied ? 'Copiado!' : 'Copiar URL'}
                                                </button>
                                            )}
                                        </div>
                                    ) : (
                                        <div className="h-full overflow-y-auto space-y-2.5 pr-1">
                                            {bulkResults.map((item, idx) => (
                                                <div key={idx} className="p-3.5 rounded-xl border border-slate-200 bg-white shadow-sm hover:shadow-md hover:border-emerald-200 transition-all group">
                                                    <div className="flex justify-between items-start mb-1.5">
                                                        <span className="text-[11px] font-bold text-slate-700">{item.name}</span>
                                                        <span className="text-[10px] font-mono text-slate-400 bg-slate-50 px-1.5 py-0.5 rounded border border-slate-100">{item.code}</span>
                                                    </div>
                                                    <div className="relative">
                                                        <p className="text-[10px] text-blue-600 font-mono break-all line-clamp-2 pr-8 leading-relaxed">{item.url}</p>
                                                        <button 
                                                            onClick={() => copyToClipboard(item.url)} 
                                                            className="absolute right-0 top-0 text-slate-300 hover:text-emerald-500 opacity-0 group-hover:opacity-100 transition-opacity p-1"
                                                        >
                                                            <Icons.Copy size={14} />
                                                        </button>
                                                    </div>
                                                </div>
                                            ))}
                                            {bulkResults.length === 0 && !validationErrors.length && (
                                                <div className="h-full flex flex-col items-center justify-center text-slate-400 text-xs text-center p-8 border-2 border-dashed border-slate-200 rounded-xl">
                                                    <Icons.Users size={32} className="mb-3 opacity-20"/>
                                                    Selecione os colaboradores na lista<br/>para gerar os links automaticamente.
                                                </div>
                                            )}
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>

                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>